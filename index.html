<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MicroTask Pro - Earn Money Online</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
       <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
   <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
   <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
   <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-storage-compat.js"></script>
    <style>
        .glow-text {
            text-shadow: 0 0 10px rgba(59, 130, 246, 0.7);
        }
        .task-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .progress-bar {
            height: 6px;
            border-radius: 3px;
            background: linear-gradient(90deg, #3B82F6 0%, #10B981 100%);
        }
        .slide-in {
            animation: slideIn 0.3s ease-out forwards;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
            100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-10">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <!-- Hamburger Menu -->
            <button id="menuBtn" class="p-2 rounded-full hover:bg-gray-100">
                <span class="material-icons text-gray-600">menu</span>
            </button>
            
            <!-- Logo -->
            <div class="flex-1 text-center">
                <h1 class="text-xl font-bold text-blue-500 glow-text">MicroTask<span class="text-emerald-500">Pro</span></h1>
            </div>
            
            <!-- Notification -->
            <button id="notificationBtn" class="p-2 rounded-full hover:bg-gray-100 relative">
                <span class="material-icons text-gray-600">notifications</span>
                <span class="absolute top-0 right-0 h-2 w-2 bg-red-500 rounded-full animate-ping"></span>
            </button>
        </div>
        
        <!-- Balance Bar -->
        <div class="bg-gradient-to-r from-blue-500 to-emerald-400 text-white py-3 px-4">
            <div class="container mx-auto flex justify-between">
                <div class="text-center">
                    <p class="text-xs opacity-80">Earnings</p>
                    <p class="font-bold">$<span id="earnings">0.00</span></p>
                </div>
                <div class="text-center">
                    <p class="text-xs opacity-80">Bonus</p>
                    <p class="font-bold">$<span id="bonus">0.50</span></p>
                </div>
                <div class="text-center">
                    <p class="text-xs opacity-80">Total</p>
                    <p class="font-bold">$<span id="total">0.50</span></p>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar Menu -->
    <div id="sidebar" class="fixed top-0 left-0 h-full w-64 bg-white shadow-lg z-20 transform -translate-x-full transition-transform duration-300">
        <div class="p-4 border-b flex items-center">
            <button id="closeMenuBtn" class="p-2 rounded-full hover:bg-gray-100 mr-2">
                <span class="material-icons text-gray-600">close</span>
            </button>
            <h2 class="text-lg font-semibold">Menu</h2>
        </div>
        <nav class="p-2">
            <a href="#" class="block p-3 rounded-lg hover:bg-blue-50 text-blue-600 font-medium">
                <span class="material-icons align-middle mr-2">home</span> Dashboard
            </a>
            <a href="#tasks" class="block p-3 rounded-lg hover:bg-gray-100">
                <span class="material-icons align-middle mr-2">task</span> Tasks
            </a>
            <a href="#profile" class="block p-3 rounded-lg hover:bg-gray-100">
                <span class="material-icons align-middle mr-2">person</span> Profile
            </a>
            <a href="#payments" class="block p-3 rounded-lg hover:bg-gray-100">
                <span class="material-icons align-middle mr-2">payments</span> Payments
            </a>
            <a href="#history" class="block p-3 rounded-lg hover:bg-gray-100">
                <span class="material-icons align-middle mr-2">history</span> Task History
            </a>
            <a href="#faq" class="block p-3 rounded-lg hover:bg-gray-100">
                <span class="material-icons align-middle mr-2">help</span> FAQ
            </a>
            <a href="#blogs" class="block p-3 rounded-lg hover:bg-gray-100">
                <span class="material-icons align-middle mr-2">article</span> Blogs
            </a>
            <a href="#" id="logoutBtn" class="block p-3 rounded-lg hover:bg-gray-100 text-red-500">
                <span class="material-icons align-middle mr-2">logout</span> Logout
            </a>
        </nav>
    </div>

    <!-- Notification Panel -->
    <div id="notificationPanel" class="fixed top-0 right-0 h-full w-80 bg-white shadow-lg z-20 transform translate-x-full transition-transform duration-300">
        <div class="p-4 border-b flex items-center">
            <button id="closeNotificationBtn" class="p-2 rounded-full hover:bg-gray-100 mr-2">
                <span class="material-icons text-gray-600">close</span>
            </button>
            <h2 class="text-lg font-semibold">Notifications</h2>
        </div>
        <div class="p-4 overflow-y-auto h-full">
            <div class="space-y-4">
                <div class="p-3 bg-blue-50 rounded-lg border border-blue-100">
                    <p class="text-sm font-medium">New bonus task available!</p>
                    <p class="text-xs text-gray-500">Complete 5 tasks today to earn extra $0.50</p>
                    <p class="text-xs text-blue-500 mt-1">2 hours ago</p>
                </div>
                <div class="p-3 rounded-lg border border-gray-100">
                    <p class="text-sm font-medium">Your payment has been processed</p>
                    <p class="text-xs text-gray-500">$5.00 has been sent to your PayPal account</p>
                    <p class="text-xs text-gray-500 mt-1">1 day ago</p>
                </div>
                <div class="p-3 rounded-lg border border-gray-100">
                    <p class="text-sm font-medium">New task category added</p>
                    <p class="text-xs text-gray-500">Check out the new survey tasks with higher payouts</p>
                    <p class="text-xs text-gray-500 mt-1">3 days ago</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-6">
        <!-- Special Offer -->
        <div class="bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl p-4 mb-6 shadow-lg animate__animated animate__pulse animate__infinite">
            <h2 class="text-lg font-bold mb-2">Special Bonus Offer!</h2>
            <p class="text-sm mb-3">Complete 10 tasks today and get 50% extra bonus on your earnings.</p>
            <a href="#tasks" class="inline-block bg-white text-purple-600 px-4 py-1 rounded-full text-sm font-medium hover:bg-gray-100 transition">Start Now</a>
        </div>

        <!-- Top Earners -->
        <div class="mb-8">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-bold">Top Earners</h2>
                <button id="toggleTopEarners" class="text-blue-500 text-sm">See All</button>
            </div>
            <div id="topEarnersList" class="flex space-x-4 overflow-x-auto pb-2">
                <!-- Top earners will be loaded here -->
            </div>
            <div id="fullTopEarners" class="hidden space-y-3 mt-4">
                <!-- Full list will be loaded here -->
            </div>
        </div>

        <!-- Task List -->
        <div id="tasksSection">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-bold">Available Tasks</h2>
                <div class="flex items-center space-x-2">
                    <span class="material-icons text-gray-400">search</span>
                    <span class="material-icons text-gray-400">filter_list</span>
                </div>
            </div>

            <div id="taskList" class="space-y-4">
                <!-- Tasks will be loaded here -->
            </div>
        </div>
    </main>

    <!-- Task Modal -->
    <div id="taskModal" class="fixed inset-0 bg-black bg-opacity-50 z-30 flex items-center justify-center hidden">
        <div class="bg-white rounded-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="p-4 border-b sticky top-0 bg-white z-10">
                <div class="flex justify-between items-center">
                    <h3 id="taskModalTitle" class="text-lg font-bold">Task Instructions</h3>
                    <button id="closeTaskModal" class="p-1 rounded-full hover:bg-gray-100">
                        <span class="material-icons">close</span>
                    </button>
                </div>
            </div>
            <div class="p-4">
                <div id="taskInstructions" class="mb-4">
                    <!-- Task instructions will be loaded here -->
                </div>
                <div id="taskRequirements" class="mb-4">
                    <!-- Task requirements will be loaded here -->
                </div>
                <div id="taskProofSection" class="mb-4 hidden">
                    <h4 class="font-medium mb-2">Submit Proof</h4>
                    <input type="file" id="taskProof" class="hidden">
                    <label for="taskProof" class="block border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-blue-400">
                        <span class="material-icons text-gray-400 text-4xl">cloud_upload</span>
                        <p class="text-sm text-gray-500">Upload screenshot or proof</p>
                    </label>
                </div>
                <div class="flex justify-between items-center mt-6">
                    <button id="cancelTaskBtn" class="px-4 py-2 border rounded-lg hover:bg-gray-50">Cancel</button>
                    <button id="startTaskBtn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Start Task</button>
                    <button id="submitTaskBtn" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 hidden">Submit</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="fixed inset-0 bg-black bg-opacity-50 z-30 flex items-center justify-center">
        <div class="bg-white rounded-xl max-w-md w-full mx-4">
            <div class="p-4 border-b">
                <h3 class="text-lg font-bold text-center">Welcome to MicroTaskPro</h3>
            </div>
            <div class="p-4">
                <div id="loginForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-1">Email</label>
                        <input type="email" id="loginEmail" class="w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-1">Password</label>
                        <input type="password" id="loginPassword" class="w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <button id="loginBtn" class="w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 mb-2">Login</button>
                    <p class="text-center text-sm">Don't have an account? <button id="showRegisterBtn" class="text-blue-500">Register</button></p>
                </div>

                <div id="registerForm" class="hidden">
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-1">Name</label>
                        <input type="text" id="registerName" class="w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-1">Email</label>
                        <input type="email" id="registerEmail" class="w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-1">Password</label>
                        <input type="password" id="registerPassword" class="w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <button id="registerBtn" class="w-full bg-green-500 text-white py-2 rounded-lg hover:bg-green-600 mb-2">Register</button>
                    <p class="text-center text-sm">Already have an account? <button id="showLoginBtn" class="text-blue-500">Login</button></p>
                </div>
            </div>
        </div>
    </div>

    <script src="firebase-config.js"></script>
    <script>
        // DOM Elements
        const menuBtn = document.getElementById('menuBtn');
        const closeMenuBtn = document.getElementById('closeMenuBtn');
        const sidebar = document.getElementById('sidebar');
        const notificationBtn = document.getElementById('notificationBtn');
        const closeNotificationBtn = document.getElementById('closeNotificationBtn');
        const notificationPanel = document.getElementById('notificationPanel');
        const toggleTopEarners = document.getElementById('toggleTopEarners');
        const topEarnersList = document.getElementById('topEarnersList');
        const fullTopEarners = document.getElementById('fullTopEarners');
        const taskList = document.getElementById('taskList');
        const taskModal = document.getElementById('taskModal');
        const closeTaskModal = document.getElementById('closeTaskModal');
        const cancelTaskBtn = document.getElementById('cancelTaskBtn');
        const startTaskBtn = document.getElementById('startTaskBtn');
        const submitTaskBtn = document.getElementById('submitTaskBtn');
        const taskProofSection = document.getElementById('taskProofSection');
        const authModal = document.getElementById('authModal');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const showRegisterBtn = document.getElementById('showRegisterBtn');
        const showLoginBtn = document.getElementById('showLoginBtn');
        const loginBtn = document.getElementById('loginBtn');
        const registerBtn = document.getElementById('registerBtn');
        const logoutBtn = document.getElementById('logoutBtn');

        // Sample data
        const sampleTasks = [
            {
                id: 'task1',
                title: 'Like and Comment on Facebook Post',
                description: 'Like the post and leave a meaningful comment',
                reward: 0.25,
                timeEstimate: '2 minutes',
                category: 'Social Media',
                requirements: 'Must have a Facebook account with at least 50 friends',
                instructions: '1. Click the Facebook link below\n2. Like the post\n3. Leave a meaningful comment (at least 5 words)\n4. Take a screenshot of your comment and upload it as proof',
                completed: false
            },
            {
                id: 'task2',
                title: 'Watch YouTube Video for 30 Seconds',
                description: 'Watch the full video and answer a simple question',
                reward: 0.15,
                timeEstimate: '1 minute',
                category: 'Video',
                requirements: 'Must have a YouTube account',
                instructions: '1. Click the YouTube link below\n2. Watch the video for at least 30 seconds\n3. Answer the question about the video content\n4. Submit your answer',
                completed: false
            },
            {
                id: 'task3',
                title: 'Sign Up for Newsletter',
                description: 'Register for our partner newsletter with valid email',
                reward: 0.50,
                timeEstimate: '3 minutes',
                category: 'Registration',
                requirements: 'Must use a valid email address',
                instructions: '1. Click the registration link below\n2. Fill out the form with your details\n3. Verify your email address\n4. Take a screenshot of the confirmation page',
                completed: false
            },
            {
                id: 'task4',
                title: 'Complete Short Survey',
                description: 'Answer 10 questions about your shopping habits',
                reward: 0.75,
                timeEstimate: '5 minutes',
                category: 'Survey',
                requirements: 'Must be 18+ years old',
                instructions: '1. Click the survey link below\n2. Answer all questions honestly\n3. Complete the survey to the end\n4. Take a screenshot of the completion page',
                completed: false
            }
        ];

        const sampleTopEarners = [
            { name: 'Alex Johnson', earnings: 245.50, avatar: 'A' },
            { name: 'Sarah Williams', earnings: 198.75, avatar: 'S' },
            { name: 'Mike Chen', earnings: 176.20, avatar: 'M' },
            { name: 'Emma Davis', earnings: 152.90, avatar: 'E' },
            { name: 'James Wilson', earnings: 132.40, avatar: 'J' },
            { name: 'Olivia Brown', earnings: 121.80, avatar: 'O' },
            { name: 'Daniel Lee', earnings: 115.30, avatar: 'D' },
            { name: 'Sophia Martinez', earnings: 98.60, avatar: 'S' },
            { name: 'Robert Taylor', earnings: 87.45, avatar: 'R' },
            { name: 'Ava Anderson', earnings: 76.90, avatar: 'A' }
        ];

        // Event Listeners
        menuBtn.addEventListener('click', () => {
            sidebar.classList.remove('-translate-x-full');
        });

        closeMenuBtn.addEventListener('click', () => {
            sidebar.classList.add('-translate-x-full');
        });

        notificationBtn.addEventListener('click', () => {
            notificationPanel.classList.remove('translate-x-full');
        });

        closeNotificationBtn.addEventListener('click', () => {
            notificationPanel.classList.add('translate-x-full');
        });

        toggleTopEarners.addEventListener('click', () => {
            const isHidden = fullTopEarners.classList.contains('hidden');
            if (isHidden) {
                fullTopEarners.classList.remove('hidden');
                toggleTopEarners.textContent = 'Hide';
            } else {
                fullTopEarners.classList.add('hidden');
                toggleTopEarners.textContent = 'See All';
            }
        });

        closeTaskModal.addEventListener('click', () => {
            taskModal.classList.add('hidden');
        });

        cancelTaskBtn.addEventListener('click', () => {
            taskModal.classList.add('hidden');
        });

        startTaskBtn.addEventListener('click', () => {
            startTaskBtn.classList.add('hidden');
            submitTaskBtn.classList.remove('hidden');
            taskProofSection.classList.remove('hidden');
        });

        showRegisterBtn.addEventListener('click', () => {
            loginForm.classList.add('hidden');
            registerForm.classList.remove('hidden');
        });

        showLoginBtn.addEventListener('click', () => {
            registerForm.classList.add('hidden');
            loginForm.classList.remove('hidden');
        });

        // Initialize the app
        function initApp() {
            // Load sample data
            loadTopEarners();
            loadTasks();
            
            // Check auth state
            firebase.auth().onAuthStateChanged(user => {
                if (user) {
                    // User is signed in
                    authModal.classList.add('hidden');
                    // Load user data
                    loadUserData(user.uid);
                } else {
                    // No user is signed in
                    authModal.classList.remove('hidden');
                }
            });

            // Login handler
            loginBtn.addEventListener('click', () => {
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                firebase.auth().signInWithEmailAndPassword(email, password)
                    .then(() => {
                        authModal.classList.add('hidden');
                    })
                    .catch(error => {
                        alert(error.message);
                    });
            });

            // Register handler
            registerBtn.addEventListener('click', () => {
                const name = document.getElementById('registerName').value;
                const email = document.getElementById('registerEmail').value;
                const password = document.getElementById('registerPassword').value;
                
                firebase.auth().createUserWithEmailAndPassword(email, password)
                    .then(userCredential => {
                        // Save additional user data
                        return firebase.database().ref('users/' + userCredential.user.uid).set({
                            name: name,
                            email: email,
                            balance: 0,
                            bonus: 0.50,
                            joined: firebase.database.ServerValue.TIMESTAMP
                        });
                    })
                    .then(() => {
                        authModal.classList.add('hidden');
                    })
                    .catch(error => {
                        alert(error.message);
                    });
            });

            // Logout handler
            logoutBtn.addEventListener('click', () => {
                firebase.auth().signOut();
            });
        }

        // Load user data
        function loadUserData(userId) {
            firebase.database().ref('users/' + userId).once('value')
                .then(snapshot => {
                    const userData = snapshot.val();
                    if (userData) {
                        document.getElementById('earnings').textContent = userData.balance.toFixed(2);
                        document.getElementById('bonus').textContent = userData.bonus.toFixed(2);
                        document.getElementById('total').textContent = (userData.balance + userData.bonus).toFixed(2);
                    }
                });
        }

        // Load top earners
        function loadTopEarners() {
            // Clear existing content
            topEarnersList.innerHTML = '';
            fullTopEarners.innerHTML = '';
            
            // Add top 5 earners to horizontal list
            sampleTopEarners.slice(0, 5).forEach((earner, index) => {
                const earnerElement = document.createElement('div');
                earnerElement.className = 'flex-shrink-0 w-20 text-center';
                earnerElement.innerHTML = `
                    <div class="h-12 w-12 bg-blue-500 text-white rounded-full flex items-center justify-center mx-auto mb-1 font-medium">${earner.avatar}</div>
                    <p class="text-xs font-medium truncate">${earner.name}</p>
                    <p class="text-xs text-green-500">$${earner.earnings.toFixed(2)}</p>
                `;
                topEarnersList.appendChild(earnerElement);
            });
            
            // Add all earners to vertical list
            sampleTopEarners.forEach((earner, index) => {
                const earnerElement = document.createElement('div');
                earnerElement.className = 'flex items-center p-2 bg-white rounded-lg shadow-sm';
                earnerElement.innerHTML = `
                    <div class="h-10 w-10 bg-blue-500 text-white rounded-full flex items-center justify-center mr-3 font-medium">${earner.avatar}</div>
                    <div class="flex-1">
                        <p class="font-medium">${earner.name}</p>
                        <p class="text-sm text-gray-500">#${index + 1} Top Earner</p>
                    </div>
                    <div class="text-green-500 font-medium">$${earner.earnings.toFixed(2)}</div>
                `;
                fullTopEarners.appendChild(earnerElement);
            });
        }

        // Load tasks
        function loadTasks() {
            // Clear existing content
            taskList.innerHTML = '';
            
            // Add tasks to the list
            sampleTasks.forEach(task => {
                const taskElement = document.createElement('div');
                taskElement.className = 'bg-white rounded-xl shadow-sm p-4 task-card transition-transform duration-200 cursor-pointer';
                taskElement.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="font-bold text-blue-600">${task.title}</h3>
                        <span class="bg-blue-100 text-blue-600 text-xs px-2 py-1 rounded">${task.category}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">${task.description}</p>
                    <div class="flex justify-between items-center">
                        <div>
                            <span class="text-green-500 font-medium">$${task.reward.toFixed(2)}</span>
                            <span class="text-xs text-gray-500 ml-2">${task.timeEstimate}</span>
                        </div>
                        <button class="view-task-btn bg-blue-500 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-600" data-task-id="${task.id}">View</button>
                    </div>
                `;
                taskList.appendChild(taskElement);
            });
            
            // Add event listeners to view task buttons
            document.querySelectorAll('.view-task-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const taskId = button.getAttribute('data-task-id');
                    openTaskModal(taskId);
                });
            });
        }

        // Open task modal
        function openTaskModal(taskId) {
            const task = sampleTasks.find(t => t.id === taskId);
            if (!task) return;
            
            document.getElementById('taskModalTitle').textContent = task.title;
            document.getElementById('taskInstructions').innerHTML = `
                <h4 class="font-medium mb-2">Instructions</h4>
                <div class="bg-gray-50 p-3 rounded-lg whitespace-pre-line text-sm">${task.instructions}</div>
            `;
            document.getElementById('taskRequirements').innerHTML = `
                <h4 class="font-medium mb-2">Requirements</h4>
                <div class="bg-gray-50 p-3 rounded-lg">${task.requirements}</div>
            `;
            
            // Reset modal state
            startTaskBtn.classList.remove('hidden');
            submitTaskBtn.classList.add('hidden');
            taskProofSection.classList.add('hidden');
            
            // Show modal
            taskModal.classList.remove('hidden');
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
